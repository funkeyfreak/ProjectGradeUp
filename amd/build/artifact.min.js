define(["jquery","core/log","block_projectgradeup/ajax","block_projectgradeup/core"],function(a,b,c,d){d=d.strings;var e=function(){this.grade=0,this.weight=0,this.category=0,this.url=0,this.status=0,this.title=0,this.type=0};e.prototype=Object.create(e.prototype),e.prototype.constructor=e;var f=function(a,c,d){if(b.debug("Creating New Artifact Collection"),this.collection="unset",this.error="no error",this.collectionList="empty","undefined"!=typeof a||c.constructor!==Array){b.debug("Creating from scratch....");try{this.collectionList=a,this.collection=JSON.parse(JSON.parse(a))}catch(e){throw"ERROR #"+g.PARAM_ERROR+" in artifact.js::artifactCollection constructor "+e}finally{b.debug("Loaded and initilized new Artifact Colllection")}b.debug("Completed")}else if(c.constructor===Array&&d instanceof f){b.debug("Creating from existing refArtifactCollection and inportedArtifacts...");for(var h=0;h<c.length;h++){b.debug("...");var i=this.artifactSanatizer(c[h]);i===!1&&d.collection.splice(h,1)}d.collection=c,this.collection=d.collection,this.collectionList=d.collectionList,b.debug("Completed")}else{if(c.constructor!==Array)throw"ERROR #"+g.PARAM_ERROR+" \n Invalid parameters passed in the class artifact mehtod constructor";b.debug("Creating from existing inportedArtifacts...");for(var h=0;h<c.length;h++){b.debug("...");var i=this.artifactSanatizer(c[h]);i===!1&&d.collection.splice(h,1)}this.collection=c,b.debug("Completed")}};f.prototype=Object.create(f.prototype),f.prototype.constructor=f;var g={USER_ERROR:20,CODE_ERROR:21,PARAM_ERROR:22,OTHER_ERROR:23};f.prototype={indexSanatizer:function(a){if("undefined"==typeof a&&(a=!1),Number(a)===a&&a%1===0)try{a=parseInt(a,10)}catch(c){b.debug(c),b.debug("\n ERROR CODE #"+g.USER_ERROR),b.debug("In artifactCollection method indexSanatizer")}return a>this.collection.length&&(a=!1),a},verifyArtifactProperties:function(a){var b=new e;for(var c in a){switch(c){case"title":b[c]+=1;break;case"grade":b[c]+=1;break;case"weight":b[c]+=1;break;case"category":b[c]+=1;break;case"status":b[c]+=1;break;case"type":b[c]+=1;break;default:return!1}if(b[c]>1)return!1}return a},artifactSanatizer:function(a){var c=!1;if("undefined"==typeof a)return c;if(a.constructor===Array){var d=null;try{d=a.reduce(function(a,b,c){return a[c]=b,a},{})}catch(e){b.debug(e),b.debug("\n ERROR CODE #"+g.USER_ERROR),b.debug("In artifactCollection method artifactSanatizer")}return d=this.verifyArtifactProperties(d)}return a.constructor!==Array?a instanceof Object?a:!1:void 0},getArtifactN:function(a){var b=!1;if(a=this.indexSanatizer(a),a===!1)throw"ERROR #"+g.PRARM_ERROR+"Invalid index in artifactCollection method getArtifactN";return b=this.collection[a]},deleteArtifact:function(a){var b=!1;if(a=this.indexSanatizer(a),a!==!1){if(b=a,-1===a)return b;b=this.collection.splice(a,1)}return b},updateArtifact:function(a,b){var c=!1;if(a=this.indexSanatizer(a),b=this.artifactSanatizer(b),a===!1||b===!1){var d=a===!1?b===!1?"The index and artifact are incorrect":"The index is incorrect":"The artifact format is incorrect";throw"ERROR CODE #"+g.PARAM_ERROR+d}return this.collection[a]=b,c=!0}};return f});